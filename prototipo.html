<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Button Logger</title>
    <meta name="description" content="Visualizza i pulsanti dei controller VR premuti">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene vr-mode-ui="enabled: true">
      <!-- Camera -->
      <a-entity id="camera" camera look-controls position="0 1.6 0">
        <!-- Testo che mostra i pulsanti premuti -->
        <a-entity id="buttonLog"
                  text="value: Premi un pulsante; color: white; align: center"
                  position="0 0 -2"
                  geometry="primitive: plane; height: 0.5; width: 2"
                  material="color: black; opacity: 0.6">
        </a-entity>
      </a-entity>

      <!-- Luce -->
      <a-entity light="type: ambient; color: #FFF"></a-entity>

      <!-- Sky -->
      <a-sky color="#222"></a-sky>
    </a-scene>

    <script>
      AFRAME.registerComponent('log-buttons', {
        init: function () {
          const el = this.el;
          const textEl = document.getElementById('buttonLog');

          el.addEventListener('buttondown', function (evt) {
            const buttonName = evt.detail.id;
            const hand = el.getAttribute('hand');
            textEl.setAttribute('text', 'value', `Premuto: ${buttonName} (${hand})`);
          });

          el.addEventListener('buttonup', function () {
            // Cancella dopo 2 secondi
            setTimeout(() => {
              textEl.setAttribute('text', 'value', 'Premi un pulsante');
            }, 2000);
          });
        }
      });
    </script>

    <!-- Controller destro -->
    <a-entity hand-controls="hand: right" log-buttons></a-entity>
    <!-- Controller sinistro -->
    <a-entity hand-controls="hand: left" log-buttons></a-entity>
  </body>
</html>
